<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ƒêƒÉng k√Ω | Anh Em R·ªçt Store</title>
  <link rel="icon" href="assets/logo/logo.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="css/navbar.css">
  <link rel="stylesheet" href="css/auth.css">
</head>
<body>
  <!-- Top Bar -->
  <div class="top-bar">
    <div class="top-bar-container">
      <div class="top-bar-left">
        <span><i class="fas fa-envelope"></i> anhemrotstore12chuaboc@hvnh.edu.vn</span>
        <span><i class="fas fa-phone"></i> (+84) 827592304</span>
      </div>
      <div class="top-bar-center">
        <span id="typewriter"></span>
        <span id="weather" class="weather-info">‚õÖ ƒêang t·∫£i th·ªùi ti·∫øt...</span>
      </div>
      <div class="top-bar-right">
        <a href="https://www.instagram.com/_yud.gnauq/"><i class="fab fa-instagram"></i> Instagram</a>
        <a href="https://web.facebook.com/quys.hokage"><i class="fab fa-facebook"></i> Facebook</a>
      </div>
    </div>
  </div>

  <!-- Main Header -->
  <header class="main-header">
    <div class="header-container">
      <div class="header-left">
        <div class="logo">
          <a href="index.html">
            <img src="assets/logo/logo.png" alt="Anh Em R·ªçt Store Logo"
              style="transition: transform 0.3s ease; display: block;" onmouseover="this.style.transform='scale(1.05)'"
              onmouseout="this.style.transform='scale(1)'">
          </a>
        </div>
        <nav class="desktop-nav">
          <ul>
            <li><a href="index.html">Trang ch·ªß</a></li>
            <li class="has-dropdown">
              <a href="product.html">S·∫£n Ph·∫©m</a>
              <div id="products-dropdown">
                <div class="products-inner-content">
                  <div class="mega-menu-column main-categories-column">
                    <div class="category-item">
                      <a href="iphone.html" data-target-category="iphone-series">
                        <i class="fab fa-apple" style="margin-right: 8px;"></i>iPhone Series</a>
                      <div class="subcategory-content" id="iphone-series-content">
                        <div class="subcategory-title">iPhone Series</div>
                        <div class="subcategory-grid-links">
                          <a href="#">iPhone 16</a>
                          <a href="#">iPhone 15</a>
                          <a href="#">iPhone 14</a>
                          <a href="#">iPhone 13</a>
                          <a href="#">iPhone 12 Pro</a>
                          <a href="#">iPhone SE</a>
                          <a href="#">So s√°nh iPhone</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="ipad.html" data-target-category="ipad-models">
                        <i class="fas fa-tablet-alt" style="margin-right: 8px;"></i>iPad Models
                      </a>
                      <div class="subcategory-content" id="ipad-models-content">
                        <div class="subcategory-title">iPad Models</div>
                        <div class="subcategory-grid-links">
                          <a href="#">iPad Pro"</a>
                          <a href="#">iPad Air</a>
                          <a href="#">iPad</a>
                          <a href="#">iPad mini</a>
                          <a href="#">Apple Pencil</a>
                          <a href="#">Magic Keyboard</a>
                          <a href="#">So s√°nh iPad</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="macbook.html" data-target-category="mac-devices">
                        <i class="fas fa-laptop" style="margin-right: 8px;"></i>Mac Devices
                      </a>
                      <div class="subcategory-content" id="mac-devices-content">
                        <div class="subcategory-title">Mac Devices</div>
                        <div class="subcategory-grid-links">
                          <a href="#">MacBook Air</a>
                          <a href="#">MacBook Pro</a>
                          <a href="#">iMac</a>
                          <a href="#">Mac mini</a>
                          <a href="#">Mac Studio</a>
                          <a href="#">Mac Pro</a>
                          <a href="#">So s√°nh Mac</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="watch.html" data-target-category="apple-watch">
                        <i class="fas fa-clock" style="margin-right: 8px;"></i>Apple Watch
                      </a>
                      <div class="subcategory-content" id="apple-watch-content">
                        <div class="subcategory-title">Apple Watch</div>
                        <div class="subcategory-grid-links">
                          <a href="#">Apple Watch Ultra</a>
                          <a href="#">Apple Watch SE</a>
                          <a href="#">Apple Watch Nike</a>
                          <a href="#">D√¢y ƒëeo Sport</a>
                          <a href="#">D√¢y ƒëeo Leather</a>
                          <a href="#">D√¢y ƒëeo Milanese</a>
                          <a href="#">So s√°nh Apple Watch</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="accessory.html" data-target-category="accessories">
                        <i class="fas fa-headphones" style="margin-right: 8px;"></i>Accessories
                      </a>
                      <div class="subcategory-content" id="accessories-content">
                        <div class="subcategory-title">Accessories</div>
                        <div class="subcategory-grid-links">
                          <a href="tainghe.html">AirPods</a>
                          <a href="#">Apple TV 4K</a>
                          <a href="#">MagSafe Charger</a>
                          <a href="#">·ªêp l∆∞ng iPhone</a>
                          <a href="#">Magic Keyboard</a>
                          <a href="#">Magic Mouse</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="mega-menu-column subcategory-display-column">
                    <div class="subcategory-content-placeholder">
                      <p>üñ±Ô∏è Di chu·ªôt qua danh m·ª•c ƒë·ªÉ xem chi ti·∫øt</p>
                    </div>
                  </div>
                  <div class="mega-menu-column promo-column">
                    <img src="assets/logo/logo.png" alt="Hot Products">
                    <p>üî• Kh√°m ph√° c√°c s·∫£n ph·∫©m hot nh·∫•t</p>
                  </div>
                </div>
              </div>
            </li>
            <li><a href="promotion.html">Khuy·∫øn M·∫°i</a></li>
            <li><a href="about.html">V·ªÅ ch√∫ng t√¥i</a></li>
            <li><a href="news.html">Tin T·ª©c</a></li>
            <li><a href="contact.html">Li√™n h·ªá</a></li>
          </ul>
        </nav>
      </div>

      <div class="header-right">
        <div class="search-box">
          <i class="fas fa-search search-icon" aria-label="M·ªü t√¨m ki·∫øm"></i>
          <div class="search-input-container">
            <input type="text" class="search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." aria-label="T√¨m ki·∫øm s·∫£n ph·∫©m">
            <button class="close-search-btn" aria-label="ƒê√≥ng t√¨m ki·∫øm">√ó</button>
          </div>
          <div class="search-results-container" role="listbox" style="display: none;"></div>
        </div>
        <div class="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count">0</span>
        </div>
        <div id="user-section">
          <!-- Dynamically updated by JavaScript -->
        </div>
        <div class="hamburger-menu">
          <i class="fas fa-bars"></i>
        </div>
      </div>
    </div>
  </header>

  <!-- Cart Modal Overlay -->
  <div class="cart-modal-overlay"></div>

  <!-- Cart Modal -->
  <div class="cart-modal">
    <div class="cart-modal-header">
      <h3>Gi·ªè h√†ng c·ªßa b·∫°n</h3>
      <button class="close-cart-modal"><i class="fas fa-times"></i></button>
    </div>
    <div class="cart-modal-body">
      <div class="cart-empty">
        <i class="fas fa-shopping-cart"></i>
        <p>Gi·ªè h√†ng tr·ªëng</p>
      </div>
      <!-- Cart items will be dynamically added here -->
    </div>
    <div class="cart-modal-footer">
      <button class="view-cart-btn">Xem gi·ªè h√†ng</button>
      <button class="checkout-btn">Thanh to√°n</button>
    </div>
  </div>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay"></div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav">
    <button class="close-mobile-nav"><i class="fas fa-times"></i></button>
    <ul>
      <li><a href="index.html">üè† Trang ch·ªß</a></li>
      <li class="has-submenu">
        <a href="#">üì± Products</a>
        <ul class="submenu">
          <li><a href="iphone.html">üì± iPhone Series</a></li>
          <li class="has-submenu">
            <a href="macbook.html">üíª Mac Devices</a>
            <ul class="submenu">
              <li><a href="#">MacBook Air</a></li>
              <li><a href="#">MacBook Pro</a></li>
              <li><a href="#">iMac</a></li>
            </ul>
          </li>
          <li><a href="ipad.html">üéØ iPad Models</a></li>
          <li><a href="watch.html">‚åö Apple Watch</a></li>
          <li><a href="accessory.html">üéß Accessories</a></li>
        </ul>
      </li>
      <li><a href="about.html">‚ÑπÔ∏è V·ªÅ ch√∫ng t√¥i</a></li>
      <li><a href="promotion.html">üõ†Ô∏è Khuy·∫øn m·∫°i</a></li>
      <li><a href="news.html">üìù Tin t·ª©c</a></li>
      <li><a href="contact.html">üìû Contact</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <div class="auth-container">
      <div class="auth-header">
        <h1 class="auth-title">ƒêƒÉng k√Ω</h1>
        <p class="auth-subtitle">T·∫°o t√†i kho·∫£n ƒë·ªÉ b·∫Øt ƒë·∫ßu mua s·∫Øm</p>
      </div>
      <form class="auth-form">
        <div class="form-group">
          <label for="fullName" class="form-label">H·ªç v√† t√™n</label>
          <input type="text" id="fullName" class="form-input" placeholder="Nh·∫≠p h·ªç v√† t√™n" required>
        </div>
        <div class="form-group">
          <label for="email" class="form-label">Email</label>
          <input type="email" id="email" class="form-input" placeholder="Nh·∫≠p email c·ªßa b·∫°n" required>
        </div>
        <div class="form-group">
          <label for="password" class="form-label">M·∫≠t kh·∫©u</label>
           <input type="password" id="password" class="form-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
           <div id="password-strength-feedback" class="password-feedback"></div>
        </div>
        <div class="form-group">
          <label for="confirmPassword" class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
          <input type="password" id="confirmPassword" class="form-input" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" required>
        </div>
        <button type="submit" class="auth-button" id="regisBtn">
          <i class="fas fa-spinner spinner"></i>
          <span>ƒêƒÉng k√Ω</span>
        </button>
      </form>
      <div class="auth-footer">
        <span>ƒê√£ c√≥ t√†i kho·∫£n? </span>
        <a href="login.html" class="form-link">ƒêƒÉng nh·∫≠p ngay</a>
      </div>
    </div>
  </main>

  <div id="footer-placeholder"></div>
  <!-- Scripts -->
  <script src="scripts/navbar.js"></script>
  <script defer src="scripts/page_loader.js"></script>
  <script src="scripts/loadfooter.js"></script>

  <script>
    // Function to show notifications
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#f44336'};
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        z-index: 10000;
        font-weight: 500;
        transform: translateX(100%);
        transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      `;
      notification.textContent = message;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);

      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
      setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

     function validatePassword(password) {
        const feedback = [];
        let isValid = true;

        if (password.length < 8) {
            feedback.push('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±.');
            isValid = false;
        }
        if (!/[A-Z]/.test(password)) {
            feedback.push('M·∫≠t kh·∫©u ph·∫£i ch·ª©a √≠t nh·∫•t m·ªôt ch·ªØ c√°i vi·∫øt hoa.');
            isValid = false;
        }
        if (!/[a-z]/.test(password)) {
            feedback.push('M·∫≠t kh·∫©u ph·∫£i ch·ª©a √≠t nh·∫•t m·ªôt ch·ªØ c√°i vi·∫øt th∆∞·ªùng.');
            isValid = false;
        }
        if (!/[0-9]/.test(password)) {
            feedback.push('M·∫≠t kh·∫©u ph·∫£i ch·ª©a √≠t nh·∫•t m·ªôt s·ªë.');
            isValid = false;
        }
        if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
            feedback.push('M·∫≠t kh·∫©u ph·∫£i ch·ª©a √≠t nh·∫•t m·ªôt k√Ω t·ª± ƒë·∫∑c bi·ªát.');
            isValid = false;
        }

        return { isValid, feedback };
    }

     document.addEventListener('DOMContentLoaded', () => {
      const regisBtn = document.getElementById('regisBtn');
      const fullNameInput = document.getElementById('fullName');
      const emailInput = document.getElementById('email');
      const passwordInput = document.getElementById('password');
      const confirmPasswordInput = document.getElementById('confirmPassword');
      const passwordStrengthFeedback = document.getElementById('password-strength-feedback'); 


      passwordInput.addEventListener('input', () => {
          const password = passwordInput.value;
          const { isValid, feedback } = validatePassword(password);
          passwordStrengthFeedback.innerHTML = ''; 
          passwordStrengthFeedback.style.color = 'red'; 

          if (feedback.length > 0) {
              feedback.forEach(msg => {
                  const p = document.createElement('p');
                  p.textContent = `‚Ä¢ ${msg}`;
                  passwordStrengthFeedback.appendChild(p);
              });
          } else {
                passwordStrengthFeedback.style.color = 'green'; 
                passwordStrengthFeedback.textContent = 'M·∫≠t kh·∫©u m·∫°nh!';
          }
      });

      regisBtn.addEventListener('click', async (e) => {
         e.preventDefault();

        const fullName = fullNameInput.value.trim();
        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();
        const confirmPassword = confirmPasswordInput.value.trim();

        // Basic validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!fullName || !email || !password || !confirmPassword) {
        showNotification('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.', 'error');
        return;
        }
        if (!emailRegex.test(email)) {
         showNotification('Email kh√¥ng h·ª£p l·ªá.', 'error');
        return;
        }
        if (password !== confirmPassword) {
           showNotification('M·∫≠t kh·∫©u kh√¥ng kh·ªõp.', 'error');
          return;
        }
        
        const { isValid: isPasswordStrong, feedback: passwordFeedbackMsgs } = validatePassword(password);
        if (!isPasswordStrong) {
            showNotification('M·∫≠t kh·∫©u kh√¥ng ƒë·ªß m·∫°nh. Vui l√≤ng ki·ªÉm tra c√°c y√™u c·∫ßu.', 'error');

            passwordStrengthFeedback.innerHTML = '';
            passwordStrengthFeedback.style.color = 'red';
            passwordFeedbackMsgs.forEach(msg => {
                const p = document.createElement('p');
                p.textContent = `‚Ä¢ ${msg}`;
                passwordStrengthFeedback.appendChild(p);
            });
            return; 
        }

        regisBtn.disabled = true;
        regisBtn.classList.add('loading');

        try {
         await new Promise(resolve => setTimeout(resolve, 1500));

        const users = JSON.parse(localStorage.getItem('users')) || [];
        const emailExists = users.some(user => user.email === email);

        if (emailExists) {
           throw new Error('Email ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω. Vui l√≤ng s·ª≠ d·ª•ng email kh√°c.');
        }

         const newUser = {
             fullName,
             email,
             password 
        };

         users.push(newUser);
         localStorage.setItem('users', JSON.stringify(users));

         localStorage.setItem('isLoggedIn', 'true');
         localStorage.setItem('currentUser', JSON.stringify({
             fullName,
             email
         }));

         showNotification('ƒêƒÉng k√Ω th√†nh c√¥ng! B·∫°n c√≥ th·ªÉ ƒëƒÉng nh·∫≠p', 'success');

         setTimeout(() => {
           window.location.href = 'login.html';
         }, 1500);
         } catch (error) {
         showNotification(error.message, 'error');
         regisBtn.disabled = false;
        regisBtn.classList.remove('loading');
         }
      });
     });
  </script>
</body>
</html>