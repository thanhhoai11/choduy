<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi Ti·∫øt Tin T·ª©c | Anh Em R·ªçt</title>
    <link rel="icon" href="assets/logo/logo.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/chatbot.css">
    <style>
        :root {
            --color-accent-blue: #1969A6;
            --color-primary-bg: #FFFFFF;
            --color-text-dark: #1A1A1A;
            --color-text-light: #6E7B91;
            --color-border-light: #E0E0E0;
        }

        /* News Detail Styles */
        #news-detail {
            padding: 40px 0;
        }

        .news-image {
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .news-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--color-text-dark);
        }

        .news-content p {
            margin-bottom: 1.5rem;
        }

        .news-meta {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }

        .news-date {
            color: var(--color-text-light);
            margin-right: 20px;
        }

        .news-category {
            background-color: var(--color-accent-blue);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .share-buttons .btn {
            margin-right: 10px;
        }

        /* Related News */
        .related-news-title {
            margin: 40px 0 25px;
            font-weight: 600;
        }

        .news-card {
            border: none;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            height: 100%;
            cursor: pointer;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .news-card img {
            height: 180px;
            object-fit: cover;
            width: 100%;
        }

        .news-card-body {
            padding: 20px;
        }

        .news-card-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-card-date {
            color: var(--color-text-light);
            font-size: 0.9rem;
        }

        /* Back button */
        .back-button {
            margin-bottom: 30px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .news-image {
                max-height: 350px;
            }

            .news-content {
                font-size: 1rem;
            }
        }

        @media (max-width: 576px) {
            .news-image {
                max-height: 250px;
            }

            .news-meta {
                flex-direction: column;
                align-items: flex-start;
            }

            .news-date {
                margin-bottom: 10px;
                margin-right: 0;
            }
        }
    </style>
</head>

<body>
  <div class="top-bar">
    <div class="top-bar-container">
      <div class="top-bar-left">
        <span><i class="fas fa-envelope"></i> anhemrotstore12chuaboc@hvnh.edu.vn</span>
        <span><i class="fas fa-phone"></i> (+84) 827592304</span>
      </div>
      <div class="top-bar-center">
        <span id="typewriter"></span>
        <span id="weather" class="weather-info">‚õÖ ƒêang t·∫£i th·ªùi ti·∫øt...</span>
      </div>
      <div class="top-bar-right">
        <a href="https://www.instagram.com/_yud.gnauq/"><i class="fab fa-instagram"></i> Instagram</a>
        <a href="https://web.facebook.com/quys.hokage"><i class="fab fa-facebook"></i> Facebook</a>
      </div>
    </div>
  </div>

  <!-- Main Header -->
  <header class="main-header">
    <div class="header-container">
      <div class="header-left">
        <div class="logo">
          <a href="index.html">
            <img src="assets/logo/logo.png" alt="Anh Em R·ªçt Store Logo"
              style="transition: transform 0.3s ease; display: block;" onmouseover="this.style.transform='scale(1.05)'"
              onmouseout="this.style.transform='scale(1)'">
          </a>
        </div>
        <nav class="desktop-nav">
          <ul>
            <li><a href="index.html">Trang ch·ªß</a></li>
            <li class="has-dropdown">
              <a href="product.html">S·∫£n Ph·∫©m</a>
              <div id="products-dropdown">
                <div class="products-inner-content">
                  <div class="mega-menu-column main-categories-column">
                    <div class="category-item">
                      <a href="iphone.html" data-target-category="iphone-series">
                        <i class="fab fa-apple" style="margin-right: 8px;"></i>iPhone Series</a>
                      <div class="subcategory-content" id="iphone-series-content">
                        <div class="subcategory-title">iPhone Series</div>
                        <div class="subcategory-grid-links">
                          <a href="#">iPhone 16</a>
                          <a href="#">iPhone 15</a>
                          <a href="#">iPhone 14</a>
                          <a href="#">iPhone 13</a>
                          <a href="#">iPhone 12 Pro</a>
                          <a href="#">iPhone SE</a>
                          <a href="#">So s√°nh iPhone</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="ipad.html" data-target-category="ipad-models">
                        <i class="fas fa-tablet-alt" style="margin-right: 8px;"></i>iPad Models
                      </a>
                      <div class="subcategory-content" id="ipad-models-content">
                        <div class="subcategory-title">iPad Models</div>
                        <div class="subcategory-grid-links">
                          <a href="#">iPad Pro"</a>
                          <a href="#">iPad Air</a>
                          <a href="#">iPad</a>
                          <a href="#">iPad mini</a>
                          <a href="#">Apple Pencil</a>
                          <a href="#">Magic Keyboard</a>
                          <a href="#">So s√°nh iPad</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="macbook.html" data-target-category="mac-devices">
                        <i class="fas fa-laptop" style="margin-right: 8px;"></i>Mac Devices
                      </a>
                      <div class="subcategory-content" id="mac-devices-content">
                        <div class="subcategory-title">Mac Devices</div>
                        <div class="subcategory-grid-links">
                          <a href="#">MacBook Air</a>
                          <a href="#">MacBook Pro</a>
                          <a href="#">iMac</a>
                          <a href="#">Mac mini</a>
                          <a href="#">Mac Studio</a>
                          <a href="#">Mac Pro</a>
                          <a href="#">So s√°nh Mac</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="watch.html" data-target-category="apple-watch">
                        <i class="fas fa-clock" style="margin-right: 8px;"></i>Apple Watch
                      </a>
                      <div class="subcategory-content" id="apple-watch-content">
                        <div class="subcategory-title">Apple Watch</div>
                        <div class="subcategory-grid-links">
                          <a href="#">Apple Watch Ultra</a>
                          <a href="#">Apple Watch SE</a>
                          <a href="#">Apple Watch Nike</a>
                          <a href="#">D√¢y ƒëeo Sport</a>
                          <a href="#">D√¢y ƒëeo Leather</a>
                          <a href="#">D√¢y ƒëeo Milanese</a>
                          <a href="#">So s√°nh Apple Watch</a>
                        </div>
                      </div>
                    </div>
                    <div class="category-item">
                      <a href="accessory.html" data-target-category="accessories">
                        <i class="fas fa-headphones" style="margin-right: 8px;"></i>Accessories
                      </a>
                      <div class="subcategory-content" id="accessories-content">
                        <div class="subcategory-title">Accessories</div>
                        <div class="subcategory-grid-links">
                          <a href="tainghe.html">AirPods</a>
                          <a href="#">Apple TV 4K</a>
                          <a href="#">MagSafe Charger</a>
                          <a href="#">·ªêp l∆∞ng iPhone</a>
                          <a href="#">Magic Keyboard</a>
                          <a href="#">Magic Mouse</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="mega-menu-column subcategory-display-column">
                    <div class="subcategory-content-placeholder">
                      <p>üñ±Ô∏è Di chu·ªôt qua danh m·ª•c ƒë·ªÉ xem chi ti·∫øt</p>
                    </div>
                  </div>
                  <div class="mega-menu-column promo-column">
                    <img src="assets/logo/logo.png" alt="Hot Products">
                    <p>üî• Kh√°m ph√° c√°c s·∫£n ph·∫©m hot nh·∫•t</p>
                  </div>
                </div>
              </div>
            </li>
            <li><a href="promotion.html">Khuy·∫øn M·∫°i</a></li>
            <li><a href="about.html">V·ªÅ ch√∫ng t√¥i</a></li>
            <li><a href="news.html" aria-current="page">Tin T·ª©c</a></li>
            <li><a href="contact.html">Li√™n h·ªá</a></li>
          </ul>
        </nav>
      </div>

      <div class="header-right">
        <div class="search-box">
          <i class="fas fa-search search-icon" aria-label="M·ªü t√¨m ki·∫øm"></i>
          <div class="search-input-container">
            <input type="text" class="search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." aria-label="T√¨m ki·∫øm s·∫£n ph·∫©m">
            <button class="close-search-btn" aria-label="ƒê√≥ng t√¨m ki·∫øm">√ó</button>
          </div>
          <div class="search-results-container" role="listbox" style="display: none;"></div>
        </div>
        <div class="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count">0</span>
        </div>
        <div id="user-section">
          <!-- Dynamically updated by JavaScript -->
        </div>
        <div class="hamburger-menu">
          <i class="fas fa-bars"></i>
        </div>
      </div>
    </div>
  </header>

  <!-- Cart Modal Overlay -->
  <div class="cart-modal-overlay"></div>

  <!-- Cart Modal -->
  <div class="cart-modal">
    <div class="cart-modal-header">
      <h3>Gi·ªè h√†ng c·ªßa b·∫°n</h3>
      <button class="close-cart-modal"><i class="fas fa-times"></i></button>
    </div>
    <div class="cart-modal-body">
      <div class="cart-empty">
        <i class="fas fa-shopping-cart"></i>
        <p>Gi·ªè h√†ng tr·ªëng</p>
      </div>
      <!-- Cart items will be dynamically added here -->
    </div>
    <div class="cart-modal-footer">
      <button class="view-cart-btn">Xem gi·ªè h√†ng</button>
      <button class="checkout-btn">Thanh to√°n</button>
    </div>
  </div>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay"></div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav">
    <button class="close-mobile-nav"><i class="fas fa-times"></i></button>
    <ul>
      <li><a href="index.html">üè† Trang ch·ªß</a></li>
      <li class="has-submenu">
        <a href="#">üì± Products</a>
        <ul class="submenu">
          <li><a href="iphone.html">üì± iPhone Series</a></li>
          <li class="has-submenu">
            <a href="macbook.html">üíª Mac Devices</a>
            <ul class="submenu">
              <li><a href="#">MacBook Air</a></li>
              <li><a href="#">MacBook Pro</a></li>
              <li><a href="#">iMac</a></li>
            </ul>
          </li>
          <li><a href="ipad.html">üéØ iPad Models</a></li>
          <li><a href="watch.html">‚åö Apple Watch</a></li>
          <li><a href="accessory.html">üéß Accessories</a></li>
        </ul>
      </li>
      <li><a href="about.html">‚ÑπÔ∏è V·ªÅ ch√∫ng t√¥i</a></li>
      <li><a href="promotion.html">üõ†Ô∏è Khuy·∫øn m·∫°i</a></li>
      <li><a href="news.html">üìù Tin t·ª©c</a></li>
      <li><a href="contact.html">üìû Contact</a></li>
    </ul>
  </nav>

    <main class="container my-5">
        <div id="news-detail">
            <!-- N·ªôi dung tin t·ª©c s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3">ƒêang t·∫£i n·ªôi dung...</p>
            </div>
        </div>
    </main>
    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // L·∫•y tham s·ªë ID t·ª´ URL
        function getParameterFromUrl(paramName) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(paramName);
        }

        // Hi·ªÉn th·ªã chi ti·∫øt tin t·ª©c
        async function displayNewsDetail() {
            const newsId = getParameterFromUrl('id');

            if (!newsId) {
                document.getElementById('news-detail').innerHTML = `
                    <div class="text-center py-5">
                        <i class="fas fa-exclamation-circle text-danger fa-3x mb-3"></i>
                        <h3 class="mb-3">Kh√¥ng t√¨m th·∫•y tin t·ª©c</h3>
                        <p>Vui l√≤ng ki·ªÉm tra l·∫°i ƒë∆∞·ªùng d·∫´n ho·∫∑c quay l·∫°i trang tin t·ª©c.</p>
                        <a href="news.html" class="btn btn-primary mt-3">Quay l·∫°i trang tin t·ª©c</a>
                    </div>
                `;
                return;
            }

            try {
                // T·∫£i d·ªØ li·ªáu t·ª´ news.json
                const response = await fetch('data/news.json');
                const newsData = await response.json();

                // T√¨m tin t·ª©c theo ID
                const newsItem = newsData.find(item => item.id === newsId);

                if (!newsItem) {
                    throw new Error('Kh√¥ng t√¨m th·∫•y tin t·ª©c');
                }

                // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ trang
                document.title = `${newsItem.title} | Anh Em R·ªçt`;

                // X√°c ƒë·ªãnh category t·ª´ title (ƒë∆°n gi·∫£n)
                let category = 'Tin t·ª©c';
                if (newsItem.title.includes('iPhone')) category = 'iPhone';
                else if (newsItem.title.includes('Apple Watch')) category = 'Apple Watch';
                else if (newsItem.title.includes('iPad')) category = 'iPad';
                else if (newsItem.title.includes('Apple Music')) category = 'Apple Music';
                else if (newsItem.title.includes('Apple TV')) category = 'Apple TV';
                else if (newsItem.title.includes('iOS')) category = 'iOS';

                // Hi·ªÉn th·ªã chi ti·∫øt tin t·ª©c
                document.getElementById('news-detail').innerHTML = `
                    <div class="back-button">
                        <a href="news.html" class="btn btn-outline-primary">
                            <i class="fas fa-arrow-left me-2"></i> Quay l·∫°i tin t·ª©c
                        </a>
                    </div>
                    
                    <h1 class="mb-4">${newsItem.title}</h1>
                    
                    <div class="news-meta">
                        <span class="news-date"><i class="far fa-calendar-alt me-2"></i>${newsItem.startDate}</span>
                        <span class="news-category">${category}</span>
                    </div>
                    
                    <img src="${newsItem.image}" alt="${newsItem.title}" class="news-image">
                    
                    <div class="news-content">
                        ${newsItem.details}
                    </div>
                    
                    <div class="share-section mt-5">
                        <h5 class="mb-3">Chia s·∫ª b√†i vi·∫øt</h5>
                        <div class="share-buttons">
                            <a href="#" class="btn btn-outline-primary btn-sm">
                                <i class="fab fa-facebook-f me-2"></i> Facebook
                            </a>
                            <a href="#" class="btn btn-outline-info btn-sm">
                                <i class="fab fa-twitter me-2"></i> Twitter
                            </a>
                            <a href="#" class="btn btn-outline-success btn-sm">
                                <i class="fab fa-whatsapp me-2"></i> WhatsApp
                            </a>
                        </div>
                    </div>
                    
                    <div class="related-news mt-5">
                        <h4 class="related-news-title">Tin t·ª©c li√™n quan</h4>
                        <div class="row" id="related-news">
                            <!-- Tin t·ª©c li√™n quan s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                        </div>
                    </div>
                `;

                // Hi·ªÉn th·ªã tin t·ª©c li√™n quan
                displayRelatedNews(newsData, newsItem, category);

            } catch (error) {
                console.error('L·ªói khi t·∫£i tin t·ª©c:', error);
                document.getElementById('news-detail').innerHTML = `
                    <div class="text-center py-5">
                        <i class="fas fa-exclamation-circle text-danger fa-3x mb-3"></i>
                        <h3 class="mb-3">ƒê√£ x·∫£y ra l·ªói</h3>
                        <p>Kh√¥ng th·ªÉ t·∫£i n·ªôi dung tin t·ª©c. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
                        <a href="news.html" class="btn btn-primary mt-3">Quay l·∫°i trang tin t·ª©c</a>
                    </div>
                `;
            }
        }

        function displayRelatedNews(newsData, currentNews, currentCategory) {
            // L·ªçc tin t·ª©c c√πng danh m·ª•c, lo·∫°i b·ªè tin t·ª©c hi·ªán t·∫°i
            let relatedNews = newsData.filter(item =>
                item.title.toLowerCase().includes(currentCategory.toLowerCase()) && // Case-insensitive comparison
                item.id !== currentNews.id
            ).slice(0, 3); // Apply slice after filter

            // If not enough 3 same category news, add more from others
            if (relatedNews.length < 3) {
                const otherNews = newsData.filter(item =>
                    !item.title.toLowerCase().includes(currentCategory.toLowerCase()) && // Case-insensitive comparison
                    item.id !== currentNews.id
                ).slice(0, 3 - relatedNews.length);

                relatedNews = [...relatedNews, ...otherNews];
            }

            // Create HTML for related news
            let relatedNewsHTML = '';

            relatedNews.forEach(item => {
                let category = 'Tin t·ª©c';
                // More robust category determination based on keywords
                if (item.title.toLowerCase().includes('iphone')) category = 'iPhone';
                else if (item.title.toLowerCase().includes('apple watch')) category = 'Apple Watch';
                else if (item.title.toLowerCase().includes('ipad')) category = 'iPad';
                else if (item.title.toLowerCase().includes('apple music')) category = 'Apple Music';
                else if (item.title.toLowerCase().includes('apple tv')) category = 'Apple TV';
                else if (item.title.toLowerCase().includes('ios')) category = 'iOS';
                else if (item.title.toLowerCase().includes('apple pay')) category = 'Apple Pay';
                else if (item.title.toLowerCase().includes('m√¥i tr∆∞·ªùng')) category = 'M√¥i tr∆∞·ªùng';
                else if (item.title.toLowerCase().includes('macos')) category = 'macOS';
                else if (item.title.toLowerCase().includes('wwdc')) category = 'WWDC';
                else if (item.title.toLowerCase().includes('apple arcade')) category = 'Apple Arcade';


                relatedNewsHTML += `
                    <div class="col-md-4 mb-4">
                        <div class="news-card" onclick="location.href='news_detail.html?id=${item.id}'">
                            <img src="${item.image}" class="card-img-top" alt="${item.title}">
                            <div class="news-card-body">
                                <h5 class="news-card-title">${item.title}</h5>
                                <div class="news-card-date">
                                    <i class="far fa-calendar-alt me-2"></i>${item.startDate}
                                </div>
                                <span class="badge bg-primary mt-2">${category}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            document.getElementById('related-news').innerHTML = relatedNewsHTML;
        }
        // Kh·ªüi t·∫°o khi trang ƒë∆∞·ª£c t·∫£i
        document.addEventListener('DOMContentLoaded', function () {
            displayNewsDetail();

            // Mobile menu toggle
            const hamburgerMenu = document.querySelector('.hamburger-menu');
            const mobileNav = document.querySelector('.mobile-nav');
            const mobileOverlay = document.querySelector('.mobile-overlay');
            const closeMobileNav = document.querySelector('.close-mobile-nav');

            hamburgerMenu.addEventListener('click', function () {
                mobileNav.classList.add('active');
                mobileOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            });

            closeMobileNav.addEventListener('click', function () {
                mobileNav.classList.remove('active');
                mobileOverlay.classList.remove('active');
                document.body.style.overflow = '';
            });

            mobileOverlay.addEventListener('click', function () {
                mobileNav.classList.remove('active');
                mobileOverlay.classList.remove('active');
                document.body.style.overflow = '';
            });

            // Search toggle
            const searchIcon = document.querySelector('.search-icon');
            const searchInputContainer = document.querySelector('.search-input-container');
            const closeSearchBtn = document.querySelector('.close-search-btn');

            searchIcon.addEventListener('click', function () {
                searchInputContainer.classList.add('active');
            });

            closeSearchBtn.addEventListener('click', function () {
                searchInputContainer.classList.remove('active');
            });
        });
    </script>
    <script src="scripts/page_loader.js"></script>
    <script src="scripts/navbar.js"></script>
    <script src="scripts/loadfooter.js"></script>
    <script src="scripts/chatbot.js"></script>
</body>

</html>